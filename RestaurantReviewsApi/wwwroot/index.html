<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>RESTaurant Reviews API</title>
    <style>
        body {
            font-family: "Arial", Times, serif;
        }
        h3, h2 {
            font-family: "Arial", Times, serif;
            width: 100%;
            text-align: left;
        }
        #sliderDiv {
            font-family: "Arial", Times, serif;
            width: 100%;
            padding: 5px 0;
            text-align: left;
            background-color: lightyellow;
            display: none;
        }
        
    </style>
    </head>
<body>
    <h1>RESTaurant Reviews API</h1>
<h2>This exercise implements a RESTful API against an EF Core In-memory database instance.  In general the API adds, updates, deletes and retrieves data.</h2>
<div onclick="rollup();" style="color: red; text-decoration: underline; font-weight: bold;">(Click here to show/hide the Design Decisions and Assumptions and Testing the API sections).</div>
<div id="sliderDiv">
    <h3>Design Decisions and Assumptions:</h3>
    <div>
        <ul>
            <li>I approached this exercise as if this code was part of a larger system so I did not focus on doing a UI.</li>
            <li>For simplicity, all restaurants in the exercise are located in the U.S.  A more robust system would not have this limitation.</li>
            <li>For simplicity, cities are unique by city and state.  There are not 5 Mechanicsburg, PAs in the exercise.  A more robust system would not have this limitation by adding geodata (i.e. longitude and longitude).</li>
            <li>For simplicity, restaurants are unique by name.  A more robust system would not have this limitation by using geodata.</li>
            <li>For simplicity, city searches are limited to exact names.  You have to enter the exact city name. If you searches for Pittsburgh, you won't get Mt. Lebanon or Lawrenceville restaurants.</li>
            <li>Phone numbers and zip codes are generated.</li>
            <li>For convenience, we are supplying the GUID for the record IDs.  A more robust system would use autogenerated data for the id (i.e. autonumbering, GUIDs, etc.)</li>
            <li>All data is ASCII not Unicode.  Disclaimers about a more robust system apply.</li>
            <li>Authorization and Authentication are assumed.</li>
        </ul>
    </div>
    <h3>Improvements: design choices leave open the opportunity to make improvements.  I addition to the comments above, I'd add the following to make the API more robust</h3>
    <div>
        <ul>
            <li>Logging - logging should be added for try/catches and other places where we'd like to capture information (i.e. startup, shutdown, data updates, etc.) Logs should go to something like ElasticStack.</li>
            <li>Unit testing</li>
            <li>Adding geodata (i.e. longitude and longitude). so you could do searches by distance/radius from a city.</li>
            <li>Add EF migration code against a real database like SQL Server.</li>
            <li>Referential Integrity: the In-memory data store doesn't support it because it is meant for demos.</li>
            <li>Implement Authorization and Authentication.  We could use OAth, API keys or various other methods if we wanted to properly flesh this out.</li>
        </ul>
    </div>

    <h2>Testing the API</h2>
    <div>
        To add restaurant data via the API, run the bash shell script supplied in the LoadRestaurant.sh script in the Tests. I used git bash but any bash shell should work. You could use POSTMAN too.<br /><br />
        A number of Reviews are available for loading using the LoadReviews.sh bash script. I've also supplied a POSTMAN collection see the Restaurant_Review.postman_collection.json file in the TestData<br /><br />
        The supplied POSTMAN requests to test the exercise requirements (by name from the collection):
        <ul>
            <li>Post a restaurant that is not in the database: CreateRestaurant</li>
        </ul>
        <ul>
            <li>Post a review for a restaurant: CreateReview</li>
        </ul>
    </div>
    <h2>Deleting data</h2>
    <div>
        Here are some commands to run in POSTMAN to delete data:
        <ul>
            <li>Delete a restaurant: DeleteRestaurant</li>
        </ul>
        <ul>
            <li>Delete a review: DeleteReview</li>
        </ul>
    </div>
    <h2>PUTting/Updating data</h2>
    <div>
        Here are some commands to run in POSTMAN to update data:
        <ul>
            <li>Update a restaurant: UpdateRestaurant</li>
        </ul>
        <ul>
            <li>Update a review: UpdateReview</li>
        </ul>
    </div>
    <h2>GETting data</h2>
    <div>
        Here are some commands to run in POSTMAN to retrieve data via the API:
        <ul>
            <li>Get a list of restaurant by city: 'GetRestaurantsByCity Akron' and 'GetRestaurantsByCity Lebo'(after running UpdateRestaurant)</li>
            <li>Get a list of reviews by user: GetReviewsByUserName.  The file duplicate reviewers.txt contains users that have nore than one review.</li>
        </ul>
    </div>
</div>
    <redoc spec-url="http://localhost:6262/swagger/v1/swagger.json"></redoc>
    <script src="https://cdn.jsdelivr.net/npm/redoc@next/bundles/redoc.standalone.js"></script>
<script>
    function rollup() {
        var x = document.getElementById("sliderDiv");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
</script>
</body>
</html>